# 钱包功能说明

## 📍 位置

钱包组件位于应用的**右上角**，在 Header 中显示。

## 🎯 核心功能

### 1. 未连接状态

当用户未连接钱包时，显示：
- 一个渐变紫蓝色的"连接钱包"按钮
- 点击按钮会打开 Web3Modal 界面

### 2. 已连接状态

连接钱包后，右上角会显示多个信息卡片：

#### a) 网络状态指示器
- **绿色**：正确连接到 Arbitrum Sepolia（Irys 测试网）
  - 显示绿点 + "Arbitrum Sepolia"
- **红色**：连接到错误的网络
  - 显示红点 + "错误的网络"
  - 提示用户切换网络

#### b) 余额显示（仅在正确网络时显示）
- 蓝色卡片
- 显示当前账户的 ETH 余额
- 格式：X.XXXX ETH
- 实时更新（使用 wagmi 的 watch 功能）

#### c) 账户地址
- 紫色卡片
- 显示简化地址：0x1234...5678（前6位...后4位）
- 带有 "✕" 按钮可以快速断开连接

#### d) 设置按钮
- 灰色按钮，显示 ⚙️ 图标
- 点击打开 Web3Modal 设置界面
- 可以：
  - 查看完整账户信息
  - 切换网络
  - 断开连接
  - 复制地址等

## 🔧 技术实现

### 使用的库和组件

1. **Wagmi** - React Hooks for Ethereum
   - `useAccount()` - 获取账户信息
   - `useBalance()` - 获取余额（带实时监听）
   - `useNetwork()` - 获取当前网络
   - `useDisconnect()` - 断开连接

2. **Web3Modal** - 钱包连接 UI
   - `useWeb3Modal()` - 控制 Modal 显示
   - 自动支持多种钱包（MetaMask, WalletConnect, Coinbase Wallet 等）
   - 内置 QR 码扫描功能

3. **Viem & Ethers** - 以太坊客户端库

### 配置文件

- `src/config/wagmi.ts` - Wagmi 配置
  - 定义支持的链（Arbitrum Sepolia）
  - 配置连接器（Injected, WalletConnect）
  - RPC 提供商配置

- `src/main.tsx` - Web3Modal 初始化
  - 创建 Web3Modal 实例
  - 设置主题（深色模式）
  - 配置主题颜色（紫色）

## 🌐 Arbitrum Sepolia 网络信息

- **Chain ID**: 421614 (0x66eee)
- **网络名称**: Arbitrum Sepolia
- **原生代币**: ETH
- **RPC URL**: https://sepolia-rollup.arbitrum.io/rpc
- **区块浏览器**: https://sepolia.arbiscan.io/

## ✨ 自动化功能

1. **自动重连**
   - 页面刷新后自动重连之前连接的钱包
   - 使用 wagmi 的 `autoConnect: true`

2. **实时监听**
   - 余额变化自动更新
   - 账户切换自动检测
   - 网络切换自动刷新

3. **网络检测**
   - 自动检测是否在正确的网络
   - 显示清晰的视觉指示

4. **错误处理**
   - 网络错误提示
   - 连接失败提示
   - 优雅的降级处理

## 🎨 UI 设计

### 颜色方案

- **连接按钮**: 紫色到蓝色渐变 (`from-purple-600 to-blue-600`)
- **正确网络**: 绿色 (`green-500`)
- **错误网络**: 红色 (`red-500`)
- **余额**: 蓝色 (`blue-500`)
- **地址**: 紫色 (`purple-500`)
- **设置**: 灰色 (`gray-700`)

### 响应式设计

- 所有组件都使用 Tailwind CSS 的响应式类
- 在小屏幕上自动调整布局
- 保持良好的可读性和可点击性

## 🔐 安全性

1. **只读操作**
   - 当前实现只读取账户和余额信息
   - 不执行任何交易或签名操作

2. **网络验证**
   - 严格验证网络 ID
   - 只在正确网络上显示余额

3. **用户控制**
   - 用户完全控制连接/断开
   - 所有操作都需要用户确认

## 📱 用户体验

### 流程

1. 用户点击"连接钱包"
2. 选择钱包类型（MetaMask/WalletConnect/等）
3. 在钱包中确认连接
4. 自动检测网络
5. 显示余额和地址
6. 如果网络错误，显示警告

### 网络切换

如果用户在错误的网络：
1. 显示红色警告
2. 不显示余额（避免混淆）
3. 用户可以点击设置按钮
4. 在 Web3Modal 中切换到 Arbitrum Sepolia

## 🚀 未来扩展

可以添加的功能：

1. **Irys 余额查询**
   - 查询 Irys 节点上的余额
   - 显示可用存储空间

2. **充值功能**
   - 一键向 Irys 节点充值
   - 显示充值历史

3. **交易历史**
   - 显示上传历史
   - 显示花费记录

4. **多网络支持**
   - 支持 Mainnet
   - 支持其他测试网

5. **ENS 支持**
   - 显示 ENS 名称而不是地址
   - ENS 头像显示

